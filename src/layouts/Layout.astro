---
import '../styles/global.css';
import tecnocoinsLogo from '../assets/tecnocoins.jpeg';
import { Image } from 'astro:assets';

const basePath = `${import.meta.env.BASE_URL}/`;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
		<link rel="icon" type="image/svg+xml" href={`${basePath}favicon-32x32.png`} />
		<meta name="generator" content={Astro.generator} />
		<title>Astro Basics</title>
	</head>
	<body>
		<nav class="w-full bg-white shadow flex items-center justify-between px-4 md:px-12 h-16 sticky top-0 z-10">
			<div class="flex items-center gap-3">
				<a href={basePath}>
					<Image src={tecnocoinsLogo} alt="Logo Tecnocoins" class="w-10 h-10" />
				</a>
				<span class="text-xl font-extrabold tracking-tight text-[#2A6F97]">Tecnocoins</span>
			</div>
			<div class="hidden md:flex gap-6 md:gap-10">
				<a href={basePath} class="text-[#2A6F97] font-semibold hover:text-[#4B8BBE] transition">Inicio</a>
				<a href={`${basePath}servicios`} class="text-[#2A6F97] font-semibold hover:text-[#4B8BBE] transition">Servicios</a>
				<a href={`${basePath}cursos`} class="text-[#2A6F97] font-semibold hover:text-[#4B8BBE] transition">Cursos</a>
				<a href={`${basePath}nosotros`} class="text-[#2A6F97] font-semibold hover:text-[#4B8BBE] transition">Nosotros</a>
			</div>
			<div class="md:hidden">
				<button id="menu-btn" class="focus:outline-none" onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
					<svg class="w-8 h-8 text-[#2A6F97]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
				</button>
			</div>
		</nav>
		<div id="mobile-menu" class="md:hidden hidden absolute top-16 left-0 w-full bg-white shadow z-20 flex flex-col items-center py-4 gap-4 animate-fade-in">
			<a href={basePath} class="text-[#2A6F97] font-semibold hover:text-[#4B8BBE] transition" onclick="document.getElementById('mobile-menu').classList.add('hidden')">Inicio</a>
			<a href={`${basePath}servicios`} class="text-[#2A6F97] font-semibold hover:text-[#4B8BBE] transition" onclick="document.getElementById('mobile-menu').classList.add('hidden')">Servicios</a>
			<a href={`${basePath}cursos`} class="text-[#2A6F97] font-semibold hover:text-[#4B8BBE] transition" onclick="document.getElementById('mobile-menu').classList.add('hidden')">Cursos</a>
			<a href={`${basePath}nosotros`} class="text-[#2A6F97] font-semibold hover:text-[#4B8BBE] transition" onclick="document.getElementById('mobile-menu').classList.add('hidden')">Nosotros</a>
		</div>
		<slot />
		
		<!-- Botones de redes sociales -->
		<section class="w-full flex justify-center py-6 bg-[#f6fbfd]">
			<div class="flex gap-6">
				<a href="https://facebook.com" target="_blank" rel="noopener" class="bg-[#1877f3] hover:bg-[#145db2] text-white rounded-full p-3 shadow-lg transition flex items-center justify-center" title="Facebook">
					<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path d="M22.675 0h-21.35C.595 0 0 .592 0 1.326v21.348C0 23.408.595 24 1.326 24h11.495v-9.294H9.691v-3.622h3.13V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.797.143v3.24l-1.918.001c-1.504 0-1.797.715-1.797 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116C23.406 24 24 23.408 24 22.674V1.326C24 .592 23.406 0 22.675 0"/></svg>
				</a>
				<a href="https://wa.me/" target="_blank" rel="noopener" class="bg-[#25d366] hover:bg-[#1da851] text-white rounded-full p-3 shadow-lg transition flex items-center justify-center" title="WhatsApp">
					<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path d="M.057 24l1.687-6.163a11.867 11.867 0 0 1-1.587-5.945C.16 5.281 5.3.14 12 .14c3.17 0 6.155 1.233 8.413 3.484a11.822 11.822 0 0 1 3.48 8.409c-.003 6.627-5.384 12.008-12.01 12.008a11.87 11.87 0 0 1-5.938-1.59L.057 24zm6.597-3.807c1.735.995 3.276 1.591 5.347 1.593 5.448-.002 9.886-4.437 9.889-9.884.002-5.462-4.415-9.89-9.881-9.892-5.462.002-9.887 4.437-9.889 9.884a9.822 9.822 0 0 0 1.599 5.354l-.999 3.648 3.934-.987zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.521.151-.174.2-.298.3-.497.099-.198.05-.372-.025-.521-.075-.149-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.363.709.306 1.262.489 1.694.626.712.227 1.36.195 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
				</a>
				<a href="https://youtube.com" target="_blank" rel="noopener" class="bg-[#ff0000] hover:bg-[#b30000] text-white rounded-full p-3 shadow-lg transition flex items-center justify-center" title="YouTube">
					<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path d="M23.498 6.186a2.994 2.994 0 0 0-2.112-2.112C19.458 3.5 12 3.5 12 3.5s-7.458 0-9.386.574A2.994 2.994 0 0 0 .502 6.186C0 8.114 0 12 0 12s0 3.886.502 5.814a2.994 2.994 0 0 0 2.112 2.112C4.542 20.5 12 20.5 12 20.5s7.458 0 9.386-.574a2.994 2.994 0 0 0 2.112-2.112C24 15.886 24 12 24 12s0-3.886-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
				</a>
				<a href="https://t.me/" target="_blank" rel="noopener" class="bg-[#229ed9] hover:bg-[#176b96] text-white rounded-full p-3 shadow-lg transition flex items-center justify-center" title="Telegram">
					<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path d="M12 0C5.371 0 0 5.371 0 12c0 6.629 5.371 12 12 12s12-5.371 12-12c0-6.629-5.371-12-12-12zm5.707 8.293l-1.414 8.485c-.104.624-.447.775-.905.482l-2.507-1.848-1.209 1.164c-.134.134-.246.246-.504.246l.18-2.537 4.617-4.168c.2-.18-.043-.281-.312-.101l-5.711 3.594-2.459-.768c-.534-.166-.544-.534.112-.789l9.6-3.705c.447-.166.84.101.697.784z"/></svg>
				</a>
			</div>
		</section>
		
		<!-- Options Button -->
		<button id="options-button" onclick="openOptionsModal()" class="fixed bottom-6 right-6 bg-gradient-to-r from-[#2A6F97] to-[#4B8BBE] text-white rounded-full p-4 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110 z-50 group animate-dramatic-entrance">
			<!-- Initial text label -->
			<div id="options-label" class="absolute -left-40 top-1/2 transform -translate-y-1/2 bg-white text-[#2A6F97] px-4 py-2 rounded-lg shadow-lg font-semibold text-sm whitespace-nowrap animate-label-bounce">
				Â¡Opciones rÃ¡pidas! ðŸ’¬
				<div class="absolute right-0 top-1/2 transform translate-x-full -translate-y-1/2 w-0 h-0 border-l-8 border-l-white border-y-4 border-y-transparent"></div>
			</div>
			
			<svg class="w-6 h-6 transition-transform group-hover:rotate-12 relative z-10" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
				<path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
			</svg>
			<span class="absolute -top-12 right-0 bg-gray-800 text-white text-sm px-3 py-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
				Ver opciones
			</span>
		</button>

		<!-- Options Modal -->
		<div id="options-modal" class="fixed inset-0 z-[60] hidden transition-all duration-300 overflow-hidden" style="background-color: rgba(0, 0, 0, 0.3);">
			<div class="flex items-center justify-center min-h-screen p-4 md:min-h-screen mobile-modal-container">
				<div class="bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col transform scale-95 transition-transform duration-300" id="options-container">
					<!-- Options Header -->
					<div class="bg-gradient-to-r from-[#2A6F97] to-[#4B8BBE] text-white p-4 rounded-t-2xl flex items-center justify-between">
						<div class="flex items-center gap-3">
							<div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
								<svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
									<path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
								</svg>
							</div>
							<div>
								<h3 class="font-semibold">Â¿CÃ³mo podemos ayudarte?</h3>
								<div class="text-sm opacity-90">
									Elige una opciÃ³n
								</div>
							</div>
						</div>
						<button onclick="closeOptionsModal()" class="text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-colors">
							<svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
								<path d="M6 6L18 18M6 18L18 6"/>
							</svg>
						</button>
					</div>

					<!-- Options Menu -->
					<div class="p-6 space-y-4">
						<!-- WhatsApp Option -->
						<a href="https://wa.me/+1234567890?text=Hola,%20me%20interesa%20conocer%20mÃ¡s%20sobre%20Tecnocoins" 
						   target="_blank" 
						   class="flex items-center gap-4 p-4 rounded-xl bg-green-50 hover:bg-green-100 transition-colors group border border-green-200 hover:border-green-300">
							<div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white">
								<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
									<path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
								</svg>
							</div>
							<div class="flex-1">
								<h4 class="font-semibold text-gray-900 group-hover:text-green-700">Hablar por WhatsApp</h4>
								<p class="text-sm text-gray-600">Chatea directamente con nosotros</p>
							</div>
							<svg class="w-5 h-5 text-gray-400 group-hover:text-green-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
								<path d="M9 5l7 7-7 7"/>
							</svg>
						</a>

						<!-- Courses Option -->
						<a href={`${basePath}cursos`} 
						   class="flex items-center gap-4 p-4 rounded-xl bg-blue-50 hover:bg-blue-100 transition-colors group border border-blue-200 hover:border-blue-300">
							<div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white">
								<svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
									<path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
								</svg>
							</div>
							<div class="flex-1">
								<h4 class="font-semibold text-gray-900 group-hover:text-blue-700">Ver Cursos</h4>
								<p class="text-sm text-gray-600">Explora nuestros cursos de trading</p>
							</div>
							<svg class="w-5 h-5 text-gray-400 group-hover:text-blue-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
								<path d="M9 5l7 7-7 7"/>
							</svg>
						</a>

						<!-- Services Option -->
						<a href={`${basePath}servicios`} 
						   class="flex items-center gap-4 p-4 rounded-xl bg-purple-50 hover:bg-purple-100 transition-colors group border border-purple-200 hover:border-purple-300">
							<div class="w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center text-white">
								<svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
									<path d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
								</svg>
							</div>
							<div class="flex-1">
								<h4 class="font-semibold text-gray-900 group-hover:text-purple-700">Servicios</h4>
								<p class="text-sm text-gray-600">Conoce todos nuestros servicios</p>
							</div>
							<svg class="w-5 h-5 text-gray-400 group-hover:text-purple-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
								<path d="M9 5l7 7-7 7"/>
							</svg>
						</a>

						<!-- Contact Option -->
						<a href={`${basePath}nosotros`} 
						   class="flex items-center gap-4 p-4 rounded-xl bg-orange-50 hover:bg-orange-100 transition-colors group border border-orange-200 hover:border-orange-300">
							<div class="w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center text-white">
								<svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
									<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
									<circle cx="9" cy="7" r="4"/>
									<path d="m22 21-3-3m0 0-3-3m3 3 3 3m-3-3v-6"/>
								</svg>
							</div>
							<div class="flex-1">
								<h4 class="font-semibold text-gray-900 group-hover:text-orange-700">Contacto</h4>
								<p class="text-sm text-gray-600">Conoce mÃ¡s sobre nosotros</p>
							</div>
							<svg class="w-5 h-5 text-gray-400 group-hover:text-orange-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
								<path d="M9 5l7 7-7 7"/>
							</svg>
						</a>
					</div>
				</div>
			</div>
		</div>

		<script>
		// Options modal functionality - Define functions globally
		window.openOptionsModal = function() {
			const modal = document.getElementById('options-modal');
			const container = document.getElementById('options-container');
			
			// Prevent body scroll on mobile
			document.body.classList.add('modal-open');
			
			modal.classList.remove('hidden');
			setTimeout(() => {
				modal.classList.remove('opacity-0');
				container.classList.remove('scale-95');
				container.classList.add('scale-100');
			}, 10);
		};

		window.closeOptionsModal = function() {
			const modal = document.getElementById('options-modal');
			const container = document.getElementById('options-container');
			
			// Restore body scroll
			document.body.classList.remove('modal-open');
			
			modal.classList.add('opacity-0');
			container.classList.remove('scale-100');
			container.classList.add('scale-95');
			setTimeout(() => {
				modal.classList.add('hidden');
			}, 300);
		};

		// Remove attention effects after initial display
		setTimeout(() => {
			const button = document.getElementById('options-button');
			const label = document.getElementById('options-label');
			if (button) {
				button.classList.remove('animate-dramatic-entrance');
			}
			if (label) {
				label.style.display = 'none';
			}
		}, 4000);

		// Close modal when clicking outside
		document.getElementById('options-modal').addEventListener('click', function(e) {
			if (e.target === this) {
				closeOptionsModal();
			}
		});
		</script>
	</body>
</html>

<style is:global>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}

	@keyframes dramatic-entrance {
		0% {
			transform: scale(0) rotate(180deg);
			opacity: 0;
		}
		30% {
			transform: scale(1.5) rotate(90deg);
			opacity: 0.7;
		}
		60% {
			transform: scale(0.8) rotate(0deg);
			opacity: 1;
		}
		80% {
			transform: scale(1.1) rotate(0deg);
		}
		100% {
			transform: scale(1) rotate(0deg);
			opacity: 1;
		}
	}

	@keyframes label-bounce {
		0%, 20%, 50%, 80%, 100% {
			transform: translateY(0) translateX(0);
		}
		40% {
			transform: translateY(-10px) translateX(-5px);
		}
		60% {
			transform: translateY(-5px) translateX(5px);
		}
	}

	.animate-dramatic-entrance {
		animation: dramatic-entrance 1.5s ease-out 1.5s both;
	}

	.animate-label-bounce {
		animation: label-bounce 2s ease-in-out infinite;
	}

	/* Chat Modal Styles */
	.message-container {
		display: flex;
		width: 100%;
	}

	.user-container {
		justify-content: flex-end;
	}

	.agent-container {
		justify-content: flex-start;
	}

	.message {
		margin-bottom: 12px;
		padding: 12px 16px;
		border-radius: 18px;
		max-width: 80%;
		line-height: 1.4;
		animation: fadeInUp 0.3s ease-out;
	}

	.user-message {
		background: linear-gradient(135deg, #2A6F97, #4B8BBE);
		color: white;
		border-bottom-right-radius: 4px;
	}

	.agent-message {
		background: white;
		color: #333;
		border: 1px solid #e5e7eb;
		border-bottom-left-radius: 4px;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
	}

	.typing-indicator {
		width: auto;
		padding: 16px 20px;
	}

	.typing-content {
		display: flex;
		align-items: center;
		gap: 12px;
	}

	.typing-text {
		color: #6b7280;
		font-style: italic;
		font-size: 14px;
	}

	.typing-dots {
		display: flex;
		gap: 4px;
		align-items: center;
	}

	.typing-dots span {
		width: 8px;
		height: 8px;
		border-radius: 50%;
		background: #9ca3af;
		animation: typing 1.4s infinite ease-in-out;
	}

	.typing-dots span:nth-child(1) { animation-delay: 0ms; }
	.typing-dots span:nth-child(2) { animation-delay: 200ms; }
	.typing-dots span:nth-child(3) { animation-delay: 400ms; }

	@keyframes typing {
		0%, 60%, 100% {
			transform: translateY(0);
			opacity: 0.4;
		}
		30% {
			transform: translateY(-10px);
			opacity: 1;
		}
	}

	@keyframes fadeInUp {
		from {
			opacity: 0;
			transform: translateY(10px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	/* Mobile keyboard viewport fixes */
	@supports (height: 100dvh) {
		.mobile-modal-container {
			min-height: 100dvh;
		}
	}

	/* Additional mobile fixes for virtual keyboard */
	@media (max-width: 768px) {
		#chat-modal {
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			height: 100vh;
			height: 100dvh;
		}
		
		.mobile-modal-container {
			padding: 1rem;
			align-items: flex-start;
			padding-top: 2rem;
		}
		
		#chat-container {
			height: calc(100vh - 4rem);
			height: calc(100dvh - 4rem);
			max-height: none;
		}
		
		/* Prevent body scroll when modal is open */
		body.modal-open {
			overflow: hidden;
			position: fixed;
			width: 100%;
			height: 100vh;
			height: 100dvh;
		}
	}
</style>
